{% extends "base.html" %} 
{% block content %}
<div class="container">
  
    
    <div class="row valign-wrapper">
            <a href={% url 'customers' %}>Back to customers</a>
            <div class="col s10">
                <h2>{{ customer.address_line_1 }}</h2>                
            </div>
            <div class="col s2">
                    <a href="!#" class="btn-floating btn-small waves-effect waves-light red"><i class="material-icons">add</i></a>
                    {% comment %} TODO: link to new job in worksheets app. Hide if existing due job exists {% endcomment %}
            </div>
    </div>
    <div><h3>{{ customer.title }} {{ customer.first_name }} {{ customer.last_name }}</h3></div>
        <table class="striped bordered">
                <thead>
                  <tr>
                      <th>Due Date</th>
                      <th>Completed Date</th>
                      <th>Price</th>
                      <th>Job Status</th>
                      <th></th>
                  </tr>
                </thead>
        
                <tbody>
                    {% for job in customer.jobs.all %} 
                    {% comment %} no need for _set since related_name has been set {% endcomment %}
                  <tr>
                    <td>{{ job.scheduled_date }}</td>
                    <td>{{ job.completed_date }}</td>
                    <td>Â£{{ job.price }}</td>
                    <td>{{ job.job_status }}</td>
                    <td><a href={{ job.id }} class="btn-floating btn-small waves-effect waves-light teal lighten-2">
                            <i class="material-icons">create</i>
                        </a>
                    {% comment %} TODO: link to worksheets app editing page for jobs {% endcomment %}
                    </td>
                  </tr>
                  {% endfor %}
                  
                </tbody>
              </table>
        
        
        
         
    
</div>
{% endblock %}